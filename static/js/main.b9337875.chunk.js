(this["webpackJsonpreact-hooks-forecast-app"]=this["webpackJsonpreact-hooks-forecast-app"]||[]).push([[0],{125:function(e,t,a){e.exports=a(209)},134:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},209:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),o=a.n(c),i=a(12),s=a(47),l=a(114),u=a(65),m="CHANGE_API_KEY",h="CHANGE_TEMPERATURE_UNIT";function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={apiKey:localStorage.getItem("apiKey")||"",temperatureUnit:"celsius"},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return localStorage.setItem("apiKey",t.payload),d({},e,{apiKey:t.payload});case h:return d({},e,{temperatureUnit:t.payload});default:return e}},y="WEATHER_IS_LOADING",g="SET_CURRENT_WEATHER",v="SET_COMING_WEATHER",N="WEATHER_FETCH_DATA_FAIL",_="CLEAR_CURRENT_WEATHER";function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={currentWeather:null,comingWeather:[],recentWeathers:[],weatherIsLoading:!1,responseErrorMessage:""},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return b({},e,{currentWeather:null,responseErrorMessage:""});case y:return b({},e,{weatherIsLoading:t.payload});case g:return b({},e,{currentWeather:t.payload,recentWeathers:[].concat(t.payload,e.recentWeathers.filter((function(e){return e.name!==t.payload.name})))});case v:var a=t.payload.list.filter((function(e){return 12===new Date(1e3*e.dt).getHours()}));return b({},e,{comingWeather:a});case N:return b({},e,{responseErrorMessage:t.payload});default:return e}},W=Object(s.d)(Object(s.c)({rootReducer:E,weatherReducer:j}),Object(s.a)(l.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=a(27),S=a(36),R=a(56),I=a(210),P=a(215),A=a(66),k=a(67),T=function(){function e(){Object(A.a)(this,e)}return Object(k.a)(e,null,[{key:"searchCitiesByName",value:function(e){return fetch("".concat("https://cors-anywhere.herokuapp.com/http://gd.geobytes.com","/AutoCompleteCity?q=").concat(e)).then((function(e){if(!e.ok)throw e;return e.json()})).catch((function(e){console.log(e)}))}}]),e}(),D=(a(134),I.a.Option),H=function(){var e=Object(S.g)(),t=Object(i.c)((function(e){return e.rootReducer})).apiKey,a=Object(n.useState)(!1),c=Object(R.a)(a,2),o=c[0],s=c[1],l=Object(n.useState)([]),u=Object(R.a)(l,2),m=u[0],h=u[1];return t?r.a.createElement(I.a,{placeholder:"Enter city name",className:"SearchBar",size:"large",showSearch:!0,showArrow:!1,loading:o,onSearch:function(e){if(!e)return null;s(!0),T.searchCitiesByName(e).then((function(e){"%s"!==e[0]&&""!==e[0]?h(e):h([])})).finally((function(){return s(!1)}))},onChange:function(t){var a=t.split(",")[0];e.push("/w/".concat(a.toLowerCase()))}},m.map((function(e,t){return r.a.createElement(D,{key:t,value:e},e)}))):r.a.createElement(P.a,{message:"Error",description:"No API key found, please go to the settings page and add one.",type:"error",showIcon:!0})},K=(a(188),function(e){switch(e.name){case"Drizzle":return r.a.createElement("div",{className:"WeatherIcon drizzle"},r.a.createElement("div",{className:"cloud"}),r.a.createElement("div",{className:"sun"},r.a.createElement("div",{className:"rays"})),r.a.createElement("div",{className:"rain"}));case"Thunderstorm":return r.a.createElement("div",{className:"WeatherIcon thunderstorm"},r.a.createElement("div",{className:"cloud"}),r.a.createElement("div",{className:"lightning"},r.a.createElement("div",{className:"bolt"}),r.a.createElement("div",{className:"bolt"})));case"Clouds":return r.a.createElement("div",{className:"WeatherIcon clouds"},r.a.createElement("div",{className:"cloud"}),r.a.createElement("div",{className:"cloud"}));case"Snow":return r.a.createElement("div",{className:"WeatherIcon flurries"},r.a.createElement("div",{className:"cloud"}),r.a.createElement("div",{className:"snow"},r.a.createElement("div",{className:"flake"}),r.a.createElement("div",{className:"flake"})));case"Clear":return r.a.createElement("div",{className:"WeatherIcon clear"},r.a.createElement("div",{className:"sun"},r.a.createElement("div",{className:"rays"})));case"Rain":return r.a.createElement("div",{className:"WeatherIcon rain"},r.a.createElement("div",{className:"cloud"}),r.a.createElement("div",{className:"rain"}));default:return null}}),U=(a(189),function(e){var t=e.type,a=e.show,c=e.duration,o=void 0===c?800:c,i=e.children,s=Object(n.useState)(a),l=Object(R.a)(s,2),u=l[0],m=l[1];Object(n.useEffect)((function(){a&&m(!0)}),[a]);return u&&r.a.createElement("div",{style:{animation:"".concat("".concat(t,a?"In":"Out")," ").concat(o,"ms")},onAnimationEnd:function(){a||m(!1)}},i)}),L=(a(190),function(e){var t=e.weather;return r.a.createElement("li",{className:"RecentlyViewed__item"},r.a.createElement(C.b,{to:"/w/".concat(t.name.toLowerCase())},r.a.createElement("h2",{className:"RecentlyViewed__item-title"},t.name,", ",t.sys.country),r.a.createElement("h3",{className:"RecentlyViewed__item-temp"},t.main.temp.toFixed(0),"\xb0"),r.a.createElement(K,{name:t.weather[0].main}),r.a.createElement("h3",{className:"RecentlyViewed__item-desc"},t.weather[0].description)))}),x=function(e){var t=e.recentWeathers.slice(-5);return r.a.createElement(U,{type:"fade",show:0!==t.length,duration:600},r.a.createElement("section",{className:"RecentlyViewed"},r.a.createElement("ul",{className:"RecentlyViewed__list"},t.map((function(e,t){return r.a.createElement(L,{key:t,weather:e})})))))},z=(a(191),function(){var e=Object(i.c)((function(e){return e.weatherReducer})).recentWeathers;return r.a.createElement("div",{className:"Home"},r.a.createElement("div",{className:"Home__container"},r.a.createElement("h1",{className:"Home__title"},"Search the weather forecast"),r.a.createElement(H,null)),0!==e.length&&r.a.createElement("div",{className:"Home__container"},r.a.createElement("h1",{className:"Home__title"},"Recently viewed"),r.a.createElement(x,{recentWeathers:e})))});function M(e){return{type:y,payload:e}}function F(e){return{type:g,payload:e}}function V(e){return function(t){return t(M(!0)),fetch(e).then((function(e){return e.json()})).then((function(e){if("200"===e.cod.toString())return e;throw e.message})).then((function(e){return t(F(e))})).catch((function(e){return t(function(e){return{type:N,payload:e}}(e))})).finally((function(){return t(M(!1))}))}}function B(e){return function(t){return fetch(e).then((function(e){return e.json()})).then((function(e){if("200"===e.cod.toString())return e;throw e.message})).then((function(e){return t(function(e){return{type:v,payload:e}}(e))})).catch((function(e){return console.log("Error",e)}))}}a(192);var G=function(){return r.a.createElement("div",{className:"Loader"},r.a.createElement(K,{name:"Clear"}))},q=function(){function e(){Object(A.a)(this,e)}return Object(k.a)(e,null,[{key:"_getApiKey",value:function(){return W.getState().rootReducer.apiKey}},{key:"_getTemperatureUnit",value:function(){return"celsius"===W.getState().rootReducer.temperatureUnit?"metric":"imperial"}},{key:"getCurrentWeatherData",value:function(e){if(e){var t=this._getApiKey(),a=this._getTemperatureUnit(),n="".concat("http://api.openweathermap.org","/data/2.5/weather?q=").concat(e,"&units=").concat(a,"&APPID=").concat(t);return W.dispatch(V(n))}}},{key:"getComingWeatherData",value:function(e){if(e){var t=this._getApiKey(),a=this._getTemperatureUnit(),n="".concat("http://api.openweathermap.org","/data/2.5/forecast?q=").concat(e,"&units=").concat(a,"&APPID=").concat(t);return W.dispatch(B(n))}}}]),e}();q.apiKey=W.getState().rootReducer.apiKey;var J=q;var Y=function(e){var t=new Date(1e3*e);if(t){var a=t.getDay(),n=t.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return"".concat(["Sunday","Monday","Thursday","Wednesday","Thursday","Friday","Saturday"][a]," ").concat(n)}},$=a(214),Q=a(216),X=(a(193),function(e){var t=Object(i.c)((function(e){return e.weatherReducer})),a=t.currentWeather,c=t.recentWeathers,o=t.responseErrorMessage,s=Object(i.b)();return Object(n.useEffect)((function(){var t=c.find((function(t){return t.name.toLowerCase()===e.cityName}));t?s(F(t)):J.getCurrentWeatherData(e.cityName)}),[]),o?r.a.createElement(P.a,{message:"Error",description:o,type:"error",showIcon:!0}):a?r.a.createElement(U,{type:"fade",show:a},r.a.createElement("section",{className:"CurrentWeather"},r.a.createElement("h1",{className:"CurrentWeather__title"},a.name,", ",a.sys.country),r.a.createElement("h2",{className:"CurrentWeather__temp"},a.main.temp.toFixed(0),"\xb0"),r.a.createElement(K,{name:a.weather[0].main}),r.a.createElement("h2",{className:"CurrentWeather__desc"},a.weather[0].description),r.a.createElement("h3",{className:"CurrentWeather__date"},Y(a.dt)),r.a.createElement($.a,{className:"CurrentWeather__row",gutter:[12,12]},r.a.createElement(Q.a,{span:12},"Wind: ",a.wind.speed," m/s"),r.a.createElement(Q.a,{span:12},"Pressure: ",a.main.pressure," hPa")),r.a.createElement($.a,{className:"CurrentWeather__row",gutter:[12,12]},r.a.createElement(Q.a,{span:12},"Humidity: ",a.main.humidity," %"),r.a.createElement(Q.a,{span:12},"Cloudiness ",a.clouds.all," %")))):null}),Z=(a(198),function(e){var t=e.weather;return r.a.createElement("li",{className:"ComingWeather__item"},r.a.createElement("h2",{className:"ComingWeather__item-title"},Y(t.dt)),r.a.createElement("h3",{className:"ComingWeather__item-temp"},t.main.temp.toFixed(0),"\xb0"),r.a.createElement(K,{name:t.weather[0].main}),r.a.createElement("h3",{className:"ComingWeather__item-desc"},t.weather[0].description))}),ee=function(e){var t=Object(i.c)((function(e){return e.weatherReducer})),a=t.comingWeather,c=t.weatherIsLoading,o=t.responseErrorMessage;return Object(n.useEffect)((function(){J.getComingWeatherData(e.cityName)}),[e.cityName]),c?null:r.a.createElement(U,{type:"fade",show:0!==a.length&&!o},r.a.createElement("section",{className:"ComingWeather"},r.a.createElement("ul",{className:"ComingWeather__list"},a.map((function(e,t){return r.a.createElement(Z,{key:t,weather:e})})))))},te=function(e){var t=Object(i.c)((function(e){return e.weatherReducer})).weatherIsLoading,a=Object(i.b)(),c=e.match.params.id;return Object(n.useEffect)((function(){return function(){return a({type:_,payload:e});var e}}),[a]),r.a.createElement("section",{className:"CityWeather"},t&&r.a.createElement(G,null),r.a.createElement(X,{cityName:c}),r.a.createElement(ee,{cityName:c}))};var ae=a(211),ne=(a(199),I.a.Option),re=function(){var e=Object(i.c)((function(e){return e.rootReducer})),t=e.temperatureUnit,a=e.apiKey,n=Object(i.b)(),c=function(e){n({type:m,payload:e})};return r.a.createElement("section",{className:"Settings"},r.a.createElement("h1",{className:"Settings__header"},"Settings"),r.a.createElement("div",{className:"Settings__content"},r.a.createElement("div",{className:"Settings__input-wrapper"},r.a.createElement("h2",{className:"Settings__input-title"},"API Key (Open Weather Map)"),r.a.createElement(ae.a,{defaultValue:a,placeholder:"Enter API Key",className:"Settings__input",size:"large",onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("h2",{className:"Settings__input-title"},"Temperature Unit"),r.a.createElement(I.a,{value:t,className:"Settings__input",size:"large",showArrow:!1,onChange:function(e){n({type:h,payload:e})}},r.a.createElement(ne,{value:"celsius"},"Celsius"),r.a.createElement(ne,{value:"fahrenheit"},"Fahrenheit")))))},ce=function(){return r.a.createElement(S.d,null,r.a.createElement(S.b,{exact:!0,path:"/",component:z}),r.a.createElement(S.b,{exact:!0,path:"/settings",component:re}),r.a.createElement(S.b,{exact:!0,path:"/w/:id",component:te}),r.a.createElement(S.a,{to:"/"}))},oe=a(213),ie=a(6),se=(a(205),a(96)),le=function(){return r.a.createElement("nav",{className:"Navigation"},r.a.createElement(C.b,{to:"/"},r.a.createElement(se.a,{type:"primary",shape:"circle",icon:"home",size:"large",className:"Navigation__button"})),r.a.createElement(C.b,{to:"/settings"},r.a.createElement(se.a,{type:"primary",shape:"circle",icon:"setting",size:"large",className:"Navigation__button"})))},ue=(a(206),oe.a.Header),me=function(){return r.a.createElement(ue,{className:"Header"},r.a.createElement($.a,{type:"flex",justify:"space-between",align:"middle"},r.a.createElement(Q.a,null,r.a.createElement($.a,{type:"flex",justify:"space-between",align:"middle"},r.a.createElement(ie.a,{type:"cloud",className:"Header__icon"}),r.a.createElement("h2",{className:"Header__title"},"Weather Forecast"))),r.a.createElement(Q.a,null,r.a.createElement(le,null))))},he=(a(207),a(208),oe.a.Content),pe=function(){return r.a.createElement(oe.a,{className:"main"},r.a.createElement(C.a,{basename:"/react-hooks-forecast-app/"},r.a.createElement(me,null),r.a.createElement(he,{className:"main__content"},r.a.createElement(ce,null))))};o.a.render(r.a.createElement(i.a,{store:W},r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[125,1,2]]]);
//# sourceMappingURL=main.b9337875.chunk.js.map